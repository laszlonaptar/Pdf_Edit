<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>PDF-Edit – Leistungsnachweis</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preload" as="script" href="/static/i18n.js?v=18">
  <link rel="preload" as="script" href="/static/script.js?v=18">
  <link rel="stylesheet" href="/static/style.css?v=18">
</head>
<body>
<header class="topbar">
  <div class="brand">PDF-Edit</div>
  <div class="spacer"></div>
  <div class="lang-switch">
    <select id="lang-select" aria-label="Language">
      <option value="de">Deutsch</option>
      <option value="hr">Hrvatski</option>
    </select>
  </div>
  <nav><a href="/logout" data-i18n="logout">Abmelden</a></nav>
</header>

<main class="container">
  <h1 data-i18n="title">Leistungsnachweis</h1>

  <form id="main-form" action="/generate_excel" method="post" class="card">

    <!-- Pauza – 60 alap, checkbox-szal 30 -->
    <input type="hidden" id="break_minutes" name="break_minutes" value="60">

    <section class="grid">
      <div class="field">
        <label for="datum" data-i18n="date">Datum</label>
        <input type="date" id="datum" name="datum" required>
      </div>

      <div class="field">
        <label for="bau" data-i18n="site">Bau / Ausführungsort</label>
        <input type="text" id="bau" name="bau" required autocomplete="off">
      </div>

      <div class="field">
        <label for="basf_beauftragter" data-i18n="bf">Bauleiter/Fachbauleiter</label>
        <input type="text" id="basf_beauftragter" name="basf_beauftragter" autocomplete="off">
      </div>

      <div class="field align-end">
        <label>&nbsp;</label>
        <label class="checkbox">
          <input type="checkbox" id="half_break">
          <span data-i18n="half_break">Pola sata pauze (30 min)</span>
        </label>
      </div>
    </section>

    <section>
      <label for="beschreibung" data-i18n="desc">Beschreibung / Was wurde gemacht?</label>
      <textarea id="beschreibung" name="beschreibung" rows="6" class="textarea"></textarea>

      <div class="actions">
        <button type="button" id="btn-translate-hr-de" class="btn ghost" style="display:none" data-i18n="translate_to_de">Auf Deutsch übersetzen</button>
      </div>
      <div id="translate-status" class="status"></div>
      <!-- Opcionális külön kimenet:
      <textarea id="beschreibung_de" rows="6" class="textarea" placeholder="Übersetzung (DE)"></textarea>
      -->
    </section>

    <section>
      <h2 data-i18n="workers">Mitarbeiter</h2>

      <!-- rejtett datalist a hagyományos autocomplete-hez (fallback) -->
      <datalist id="dl-lastnames"></datalist>
      <datalist id="dl-firstnames"></datalist>
      <datalist id="dl-ids"></datalist>

      <div class="table">
        <div class="trow thead">
          <div data-i18n="th_last">Name</div>
          <div data-i18n="th_first">Vorname</div>
          <div data-i18n="th_id">Ausweis</div>
          <div data-i18n="th_start">Beginn</div>
          <div data-i18n="th_end">Ende</div>
          <div data-i18n="th_vh">Vorhaltung</div>
        </div>

        <!-- 5 sor – minden mező egységes szélességű -->
        <!-- Minden sorban egy overlay találati lista (valódi választó) -->
        {% for i in range(1,6) %}
        <div class="trow worker-row" data-row="{{ i }}">
          <div class="ac-wrap">
            <input name="nachname{{ i }}" id="nachname{{ i }}" autocomplete="off" placeholder="">
            <div class="ac-list" id="ac-last-{{ i }}"></div>
          </div>

          <div class="ac-wrap">
            <input name="vorname{{ i }}" id="vorname{{ i }}" autocomplete="off" placeholder="">
            <div class="ac-list" id="ac-first-{{ i }}"></div>
          </div>

          <div class="ac-wrap">
            <input name="ausweis{{ i }}" id="ausweis{{ i }}" autocomplete="off" placeholder="">
            <div class="ac-list" id="ac-id-{{ i }}"></div>
          </div>

          <!-- Beginn -->
          <div class="time-wrap">
            <select id="beginn{{ i }}_h"></select>
            <select id="beginn{{ i }}_m"></select>
            <input type="hidden" id="beginn{{ i }}" name="beginn{{ i }}">
          </div>

          <!-- Ende -->
          <div class="time-wrap">
            <select id="ende{{ i }}_h"></select>
            <select id="ende{{ i }}_m"></select>
            <input type="hidden" id="ende{{ i }}" name="ende{{ i }}">
          </div>

          <input name="vorhaltung{{ i }}" id="vorhaltung{{ i }}" autocomplete="off" placeholder="">
        </div>
        {% endfor %}
      </div>
    </section>

    <div class="form-actions">
      <button type="submit" class="btn primary" data-i18n="btn_excel">Excel generieren</button>
      <button type="button" id="btn-pdf" class="btn" data-i18n="btn_pdf">PDF Vorschau</button>
    </div>
  </form>
</main>

<script src="/static/i18n.js?v=18"></script>
<script src="/static/script.js?v=18"></script>
</body>
</html>
